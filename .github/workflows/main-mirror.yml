name: main-mirror

on:

  push:
    tags:
      - '0.3.*'

jobs:

  mirror:

    runs-on: ubuntu-latest

    steps:

      - name: Check out repository
        uses: actions/checkout@v4

      - name: Set up Java environment
        uses: actions/setup-java@v4
        with:
          java-version: 17
          distribution: temurin
          cache: maven

      - name: Generate docs
        run: >
          mvn --batch-mode
          --activate-profiles publish
          -Drevision=${{ github.ref_name }}
          install site

      - name: Publish docs
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: Publish docs
          branch: main
